{% extends 'base.html.twig' %}

{% block title %}Valider ma commande{% endblock %}

{% block body %}
<section class="order container">
<h2 class="h2">Mon récapitulatif</h2>
<p class="order_title">Vérifier vos information avant de procéder au paiement.</p>
<hr>
<div class="order_row">
  <div class="order_col">
  <p class="order_label">Mon addresse de livraison</p>
    <div class="order_item">
      <p>{{ delivery|raw }}</p>
    </div>
    <hr>
    <p class="order_label">Mon transporteur</p>
    <div class="order_item">
      <strong>{{ carrier.name }}</strong>
      <p>{{ carrier.description }}</p>
      <p>{{ carrier.price|number_format(2,',','.') }} €</p>
    </div>
  </div>
  <div class="order_col">
    <p class="order_label">Ma commande</p>
    {% set total = null %}
    {% for item in cart %}
      <div class="order_row">
        <div class="table_img" style="background-image: url('/uploads/{{ item.product.illustration }}');"></div>
        <p>{{ item.quantity }}</p>
        <div class="table_desciption">
          <span>{{ item.product.name }}</span>
          <span>{{ item.product.subtitle }}</span>
        </div>
        <div>
        {{ ((item.product.price * item.quantity) / 100)|number_format(2,',','.') }} €
        </div>
      </div>
    {% set total = total + (item.quantity * item.product.price) %}
    {% endfor %}
    <div class="order_total">
      <span>Sous-total : <strong>{{ (total / 100)|number_format(2,',','.') }} €</strong></span>
      <span>Livraison : <strong>{{ carrier.price|number_format(2,',','.') }} €</strong></span>
      <span>Total : <strong>{{ ((total / 100) + carrier.price)|number_format(2,',','.') }} €</strong></span>
    </div>
    <div class="order_action">
      <a href="#" class="btn btn_purple">Payer {{ ((total / 100) + carrier.price)|number_format(2,',','.') }} €</a>
    </div>
  </div>
</div>
</section>
{% endblock %}
